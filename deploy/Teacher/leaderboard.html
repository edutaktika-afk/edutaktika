 <script>
    document.addEventListener("DOMContentLoaded", function() {
        firebase.auth().onAuthStateChanged(async function(user) {
            if (!user) {
                window.location.href = "logreg.html";
                return;
            }
            const uid = user.uid;
            const snap = await firebase.database().ref('teachers/' + uid).once('value');
            const teacher = snap.val();
            if (!teacher || teacher.role !== "teacher") {
                document.getElementById('mainContent').style.display = "none";
                alert("Access denied.");
                await firebase.auth().signOut();
                window.location.href = "logreg.html";
            } else {
                document.getElementById('mainContent').style.display = "block";
            }
        });
    });
    </script>
    
    <!-- Leaderboard for Kids - Example HTML & CSS -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Leaderboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../CSS/header.css">
    <link rel="stylesheet" href="../CSS/leaderboard.css">
    <link rel="stylesheet" href="../CSS/footer.css">
    <link rel="stylesheet" href="../CSS/dropdown.css">
    <link rel="icon" type="image/png" href="../images/icons/winner.png" />
        <link rel="stylesheet" href="../CSS/fonts.css">
<!-- ...inside <head> -->
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700&family=Manrope:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    

</head>
<body>
<div id="mainContent" style="display:none;">

    <header>
        <div class="floating-elements">
            <div class="floating-element"></div>
            <div class="floating-element"></div>
            <div class="floating-element"></div>
            <div class="floating-element"></div>
        </div>
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <!-- Replace your logo-text div with this for per-letter bounce -->
                <div class="logo-text">
                    <span>E</span><span>d</span><span>u</span><span>t</span><span>a</span><span>k</span><span>t</span><span>i</span><span>k</span><span>a</span>
                </div>
            </div>
            <nav>
                <ul>
                    <li><a href="homepage.html">Home</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropbtn">Subject <i class="fa fa-caret-down"></i></a>
                        <ul class="dropdown-content">
                            <li><a href="subject_math.html">Math</a></li>
                            <li><a href="subject_english.html">English</a></li>
                            <li><a href="subject_science.html">Science</a></li>
                        </ul>
                    </li>
                    <li><a href="studentlist.html">Student</a></li>
                    <li><a href="leaderboard.html">Leaderboard</a></li>
                    <li>
                        <a href="#" id="profileBtn"><i class="fas fa-user-circle"></i> Profile</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

     <!-- Profile Sidebar (Dynamic with Firebase) -->
        <div id="profileSidebar" class="profile-sidebar">
            <div class="sidebar-content">
                <button class="close-btn" id="closeSidebar">&times;</button>
                <img class="profile-avatar" id="profileAvatar" src="https://api.dicebear.com/7.x/bottts/svg?seed=user" alt="Profile Avatar">
                <div class="profile-name" id="profileName">Loading...</div>
                <button class="profile-edit-btn">Edit Profile</button><br>
                <div class="profile-info" style="width:100%;max-width:260px;margin-bottom:24px;">
                    <div><strong>ID:</strong> <span id="profileId">-</span></div>
                    <div><strong>First Name:</strong> <span id="profileFirstName">-</span></div>
                    <div><strong>Middle Name:</strong> <span id="profileMiddleName">-</span></div>
                    <div><strong>Last Name:</strong> <span id="profileLastName">-</span></div>
                    <div><strong>Grade Level:</strong> <span id="profileGrade">-</span></div>
                    <div><strong>Section:</strong> <span id="profileSection">-</span></div>
                </div>
                <div class="logout-switch-row">
                    <div class="logout-switch" id="logoutSwitch">
                        <div class="logout-switch-circle"></div>
                    </div>
                    <span class="logout-label" id="logoutLabel">LOGOUT</span>
                </div>
            </div>
        </div>

        <!-- Firebase App (the core Firebase SDK) -->
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

        <script src="../assets/js/Teacher Side/profile.js"></script>

    <script src="../assets/js/Teacher Side/header.js"></script>

    <div class="leaderboard-container">
        <div class="leaderboard-title">ğŸŒŸ Student Leaderboard ğŸŒŸ</div>
        <div class="leaderboard-desc">See who's on top this week! Play games, earn points, and climb the ranks!</div>
        <!-- Podium -->
        <div class="podium" id="podium"></div>
        <!-- Leaderboard Table -->
        <table class="leaderboard-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Player</th>
                    <th>Points</th>
                    <th>Badges</th>
                </tr>
            </thead>
            <tbody id="leaderboard-body">
                <!-- Leaderboard rows will be inserted here -->
            </tbody>
        </table>
        <!-- Pagination (static, for demo) -->
        <div class="pagination">
            <button disabled>&lt; Prev</button>
            <button class="active">1</button>
            <button disabled>2</button>
            <button disabled>3</button>
            <button disabled>Next &gt;</button>
        </div>
    </div>
    
    <script>
    // 1. Firebase config (replace with your own)
   

    // 2. Fetch and display leaderboard
    async function loadLeaderboard() {
        const snapshot = await db.ref('students').orderByChild('points').once('value');
        let students = [];
        snapshot.forEach(child => {
            const s = child.val();
            s._key = child.key;
            students.push(s);
        });
        // Sort descending by points
        students.sort((a, b) => (b.points || 0) - (a.points || 0));

        // Podium (top 3)
        const podiumIndices = [1, 0, 2]; // 2nd, 1st, 3rd
        const podiumClasses = ['silver', 'gold', 'bronze'];
        const podiumRanks = [2, 1, 3];
        let podiumHtml = '';
        podiumIndices.forEach((studentIdx, i) => {
            if (!students[studentIdx]) return;
            const student = students[studentIdx];
            const avatar = student.avatar ? student.avatar : `https://api.dicebear.com/7.x/bottts/svg?seed=${encodeURIComponent((student.fname||'') + (student.lname||''))}`;
            podiumHtml += `
            <div class="podium-place ${podiumClasses[i]}">
                <div class="podium-rank">${podiumRanks[i]}</div>
                <img src="${avatar}" class="avatar" alt="${student.fname||''}">
                <div class="podium-name">${(student.fname||'') + ' ' + (student.lname||'')}</div>
                <div class="podium-score">${parseInt(student.points)||0} pts</div>
            </div>`;
        });
        document.getElementById('podium').innerHTML = podiumHtml;

        // Leaderboard table
        let tbodyHtml = '';
        students.forEach((student, idx) => {
            const avatar = student.avatar ? student.avatar : `https://api.dicebear.com/7.x/bottts/svg?seed=${encodeURIComponent((student.fname||'') + (student.lname||''))}`;
            let badges = "ğŸ…";
            if (idx === 0) badges = "ğŸ…ğŸ…ğŸ…";
            else if (idx === 1) badges = "ğŸ…ğŸ…";
            tbodyHtml += `
            <tr${idx === 0 ? ' class="me"' : ''}>
                <td>${idx + 1}</td>
                <td>
                    <span class="player-cell">
                        <img src="${avatar}" class="avatar-small" alt="${student.fname||''}">
                        <span class="player-name">${(student.fname||'') + ' ' + (student.lname||'')}</span>
                        <span class="tooltiptext">${idx === 0 ? "Top scorer!" : "Great job!"}</span>
                    </span>
                </td>
                <td>${parseInt(student.points)||0}</td>
                <td>${badges}</td>
            </tr>`;
        });
        document.getElementById('leaderboard-body').innerHTML = tbodyHtml;
    }

    // Show all students under the same section as the logged-in teacher
    async function loadSectionStudents() {
        // Get current teacher's section
        const user = firebase.auth().currentUser;
        if (!user) return;
        const teacherUID = user.uid;
        const teacherSnap = await db.ref('teachers/' + teacherUID).once('value');
        const teacher = teacherSnap.val();
        if (!teacher || !teacher.section) return;

        const section = teacher.section;

        // Fetch all students in the same section
        const studentsSnap = await db.ref('students').orderByChild('section').equalTo(section).once('value');
        let students = [];
        studentsSnap.forEach(child => {
            const s = child.val();
            s._key = child.key;
            students.push(s);
        });

        // Sort by points (optional)
        students.sort((a, b) => (b.points || 0) - (a.points || 0));

        // Render leaderboard table
        let tbodyHtml = '';
        students.forEach((student, idx) => {
            const avatar = student.avatar ? student.avatar : `https://api.dicebear.com/7.x/bottts/svg?seed=${encodeURIComponent((student.fname||'') + (student.lname||''))}`;
            let badges = "ğŸ…";
            if (idx === 0) badges = "ğŸ…ğŸ…ğŸ…";
            else if (idx === 1) badges = "ğŸ…ğŸ…";
            tbodyHtml += `
            <tr${idx === 0 ? ' class="me"' : ''}>
                <td>${idx + 1}</td>
                <td>
                    <span class="player-cell">
                        <img src="${avatar}" class="avatar-small" alt="${student.fname||''}">
                        <span class="player-name">${(student.fname||'') + ' ' + (student.lname||'')}</span>
                        <span class="tooltiptext">${idx === 0 ? "Top scorer!" : "Great job!"}</span>
                    </span>
                </td>
                <td>${parseInt(student.points)||0}</td>
                <td>${badges}</td>
            </tr>`;
        });
        document.getElementById('leaderboard-body').innerHTML = tbodyHtml;
    }

    // Use this instead of loadLeaderboard
    document.addEventListener('DOMContentLoaded', function() {
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) loadSectionStudents();
        });
    });
    </script>
<footer>
  <div class="footer-wrap">
    <div class="footer-col">
      <h4 class="footer-brand">Eduktaktika</h4>
      <p>Interactive, gameâ€‘based learning for Math, English, and Science.</p>
    </div>
    <div class="footer-col">
      <h4>Connect</h4>
      <ul class="footer-social">
        <li><a href="homepage.html">Homepage</a></li>
        <li><a href="studentlist.html">Student</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Subjects</h4>
      <ul class="footer-links">
        <li><a href="subject_math.html">Math</a></li>
        <li><a href="subject_english.html">English</a></li>
        <li><a href="subject_science.html">Science</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Leaderboards</h4>
      <ul class="footer-links">
        <li><a href="leaderboard_math.html">Math</a></li>
        <li><a href="leaderboard_english.html">English</a></li>
        <li><a href="leaderboard_science.html">Science</a></li>
      </ul>
    </div>
  </div>
  <div class="footer-bottom">
    <div class="footer-social-row">
      <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
      <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
      <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
      <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
    </div>
    <p>Â© 2025 Eduktaktika. All rights reserved.</p>
  </div>
</footer>

        <!-- Edit Profile Modal -->

<link rel="stylesheet" href="../CSS/editProfile.css">

<div id="editProfileModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.35);z-index:99999;align-items:center;justify-content:center;">
    <div style="background:#fff;padding:32px 28px;border-radius:14px;max-width:350px;width:90%;box-shadow:0 4px 24px #0002;text-align:left;position:relative;">
        <h3 style="margin-top:0;">Edit Profile</h3>
        <form id="editProfileForm">
            <label>First Name:<br>
                <input type="text" id="edit_fname" required>
            </label><br><br>
            <label>Middle Name:<br>
                <input type="text" id="edit_mname">
            </label><br><br>
            <label>Last Name:<br>
                <input type="text" id="edit_lname" required>
            </label><br><br>
            <label>Grade Level:<br>
                <input type="text" id="edit_gradelevel">
            </label><br><br>
            <label>Section:<br>
                <input type="text" id="edit_section">
            </label><br><br>
            <div style="text-align:right;">
                <button type="button" onclick="closeEditProfileModal()" style="margin-right:10px;">Cancel</button>
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>

<script src="../assets/js/Teacher Side/editProfile.js"></script>
</div>
</body>
</html>